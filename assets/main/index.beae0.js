window.__require=function t(e,o,c){function r(i,s){if(!o[i]){if(!e[i]){var p=i.split("/");if(p=p[p.length-1],!e[p]){var a="function"==typeof __require&&__require;if(!s&&a)return a(p,!0);if(n)return n(p,!0);throw new Error("Cannot find module '"+i+"'")}i=p}var l=o[i]={exports:{}};e[i][0].call(l.exports,function(t){return r(e[i][1][t]||t)},l,l.exports,t,e,o,c)}return o[i].exports}for(var n="function"==typeof __require&&__require,i=0;i<c.length;i++)r(c[i]);return r}({Bullet:[function(t,e,o){"use strict";cc._RF.push(e,"9a7b0PcPUtMy69dJrJSLKVI","Bullet");var c,r=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,c){var r,n=arguments.length,i=n<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,c);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(n<3?r(i):n>3?r(e,o,i):r(e,o))||i);return n>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,s=cc._decorator,p=s.ccclass;s.property,function(t){t[t.up=cc.macro.KEY.w]="up",t[t.down=cc.macro.KEY.s]="down",t[t.left=cc.macro.KEY.a]="left",t[t.right=cc.macro.KEY.d]="right"}(i||(i={}));var a={},l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._speed=200,e._state="",e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.setDirection=function(t,e){for(var o in a[t]=e,a)if(a[o]){this.node.getComponent(cc.Animation).play;break}},e.prototype.moveAction=function(){var t=this.node.getComponent(cc.RigidBody).linearVelocity;a[i.up]?t.y=a[i.up]*this._speed:a[i.down]?t.y=a[i.down]*this._speed:t.y=0,a[i.left]?t.x=a[i.left]*this._speed:a[i.right]?t.x=a[i.right]*this._speed:t.x=0,0!=t.x&&0!=t.y&&(console.log("\u8bbe\u7f6e\u659c\u7ebf\u65b9\u5411\u901f\u5ea6"),t.x=Math.sqrt(2)/2*t.x,t.y=Math.sqrt(2)/2*t.y),0==t.x&&0==t.y||console.log("==:",t.x,t.y),this.node.getComponent(cc.RigidBody).linearVelocity=t},e.prototype.update=function(t){this.moveAction(t)},n([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Helloworld:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Helloworld");var c,r=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,c){var r,n=arguments.length,i=n<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,c);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(n<3?r(i):n>3?r(e,o,i):r(e,o))||i);return n>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Bullet"),s=t("./TouchControl"),p=cc._decorator,a=p.ccclass,l=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hero=null,e.tiledMap=null,e.sceneNode=null,e}return r(e,t),e.prototype.onLoad=function(){var t=cc.director.getPhysicsManager();t.enabled=!0,t.debugDrawFlags=1,t.gravity=cc.v2(0,0),this.node.getComponent(s.default).setUI(this)},e.prototype.start=function(){for(var t=this.tiledMap.getTileSize(),e=this.tiledMap.getLayer("wall"),o=e.getLayerSize(),c=0;c<o.width;++c)for(var r=0;r<o.height;++r){var n=e.getTiledTileAt(c,r,!0);if(0!=n.gid){n.node.group="wall",n.node.addComponent(cc.RigidBody).type=cc.RigidBodyType.Static;var i=n.node.addComponent(cc.PhysicsBoxCollider);i.offset=cc.v2(t.width/2,t.height/2),i.size=t,i.apply()}}},e.prototype.getHero=function(){return this.hero},e.prototype.shootBullet=function(){var t=new i.default;this.sceneNode.addChild(t)},n([l(cc.Node)],e.prototype,"hero",void 0),n([l(cc.TiledMap)],e.prototype,"tiledMap",void 0),n([l(cc.Node)],e.prototype,"sceneNode",void 0),n([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"./Bullet":"Bullet","./TouchControl":"TouchControl"}],Hero:[function(t,e,o){"use strict";cc._RF.push(e,"395ffX6mLdPFJOvYqD6fxgz","Hero");var c,r=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,c){var r,n=arguments.length,i=n<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,c);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(n<3?r(i):n>3?r(e,o,i):r(e,o))||i);return n>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i,s=cc._decorator,p=s.ccclass;s.property,function(t){t[t.up=cc.macro.KEY.w]="up",t[t.down=cc.macro.KEY.s]="down",t[t.left=cc.macro.KEY.a]="left",t[t.right=cc.macro.KEY.d]="right"}(i||(i={}));var a={},l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._speed=100,e._state="",e}return r(e,t),e.prototype.onLoad=function(){},e.prototype.setDirection=function(t,e){for(var o in a[t]=e,a)if(a[o]){this.node.getComponent(cc.Animation).play;break}},e.prototype.setState=function(t){if(""==t)return this._state="",void this.node.getComponent(cc.Animation).stop();this._state!=t&&(cc.log("mylog:",t),this._state=t,this.node.getComponent(cc.Animation).play(this._state))},e.prototype.moveAction=function(){var t="",e=this.node.getComponent(cc.RigidBody).linearVelocity;a[i.up]?(e.y=a[i.up]*this._speed,t="hero_up"):a[i.down]?(e.y=a[i.down]*this._speed,t="hero_down"):e.y=0,a[i.left]?(e.x=a[i.left]*this._speed,t="hero_left"):a[i.right]?(e.x=a[i.right]*this._speed,t="hero_right"):e.x=0,0!=e.x&&0!=e.y&&(console.log("\u8bbe\u7f6e\u659c\u7ebf\u65b9\u5411\u901f\u5ea6"),e.x=Math.sqrt(2)/2*e.x,e.y=Math.sqrt(2)/2*e.y),0==e.x&&0==e.y||console.log("==:",e.x,e.y),this.node.getComponent(cc.RigidBody).linearVelocity=e,this.setState(t)},e.prototype.update=function(t){this.moveAction(t)},n([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],TouchControl:[function(t,e,o){"use strict";cc._RF.push(e,"4231f2UsexPkqG2qIeumtz5","TouchControl");var c,r=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),n=this&&this.__decorate||function(t,e,o,c){var r,n=arguments.length,i=n<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,c);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(i=(n<3?r(i):n>3?r(e,o,i):r(e,o))||i);return n>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Hero"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._UI=null,e._hero=null,e}return r(e,t),e.prototype.onLoad=function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},e.prototype.onDestroy=function(){cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.setUI=function(t){this._UI=t,cc.log("ui:",this._UI),this._hero=this._UI.getHero(),cc.log("hero:",this._hero)},e.prototype.setDirection=function(t,e){this._hero.getComponent(i.default).setDirection(t,e)},e.prototype.onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.w:cc.log("up"),this.setDirection(t.keyCode,1);break;case cc.macro.KEY.s:cc.log("down"),this.setDirection(t.keyCode,-1);break;case cc.macro.KEY.a:cc.log("left"),this.setDirection(t.keyCode,-1);break;case cc.macro.KEY.d:cc.log("right"),this.setDirection(t.keyCode,1)}},e.prototype.onKeyUp=function(t){switch(t.keyCode){case cc.macro.KEY.w:cc.log("up"),this.setDirection(t.keyCode,0);break;case cc.macro.KEY.s:cc.log("down"),this.setDirection(t.keyCode,0);break;case cc.macro.KEY.a:cc.log("left"),this.setDirection(t.keyCode,0);break;case cc.macro.KEY.d:cc.log("right"),this.setDirection(t.keyCode,0)}},n([p],e)}(cc.Component));o.default=a,cc._RF.pop()},{"./Hero":"Hero"}]},{},["Bullet","Helloworld","Hero","TouchControl"]);